<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bimbala - Changelog Editor</title>
    
    <!-- Meta tags for SEO -->
    <meta name="description" content="Brief description of the changelog page">
    <meta name="keywords" content="changelog, helper, keep, logs, pages, changelog page,">
    <meta name="author" content="Bimbala">


    <!-- Include Tailwind CSS -->
    <link href="assets/style.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100">

    <!-- Content -->
    <div class="container mx-auto p-4">
        <!-- Changelog Form -->
        <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
            <!-- Form Title -->
            <h2 class="text-xl font-bold mb-4">Changelog Editor</h2>

            <!-- Version and Date -->
            <div class="flex mb-4 items-center">
                <label class="block text-sm font-bold mb-2" for="version">Version:</label>
                <input class="shadow appearance-none border rounded w-3/4 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="version" type="text" placeholder="1.0.0" pattern="[a-zA-Z0-9]{6}" title="Please enter numbers and dots only">

            </div>

            <div class="mb-4 flex items-center">
                <label class="block text-sm font-bold mr-2" for="date">Date:</label>
                <input class="shadow appearance-none border rounded w-1/2 py-2 px-3  leading-tight focus:outline-none focus:shadow-outline" id="date" type="date" placeholder="YYYY-MM-DD">
                <button onclick="addTodayDate()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-2 focus:outline-none focus:shadow-outline" type="button">Today</button>
            </div>

            <!-- Sections -->
            <div class="mb-4">
                <label class="block text-sm font-bold mb-2">Added:</label>
                <textarea class="added-items shadow appearance-none border rounded w-full py-2 px-3  leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter added items here..."></textarea>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-bold mb-2">Fixed:</label>
                <textarea class="fixed-items shadow appearance-none border rounded w-full py-2 px-3  leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter fixed items here..."></textarea>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-bold mb-2">Changed:</label>
                <textarea class="changed-items shadow appearance-none border rounded w-full py-2 px-3  leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter changed items here..."></textarea>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-bold mb-2">Removed:</label>
                <textarea class="removed-items shadow appearance-none border rounded w-full py-2 px-3  leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter removed items here..."></textarea>
            </div>

            <!-- Submit Button -->
            <div class="flex items-center justify-between">
                <button onclick="generateChangelog()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button">Generate Changelog</button>
            </div>

            <!-- Generated Changelog -->
            <div class="mt-4">
                <textarea id="generatedChangelog" rows="8" cols="50" class="generated-changelog shadow appearance-none border rounded w-full py-2 px-3  leading-tight focus:outline-none focus:shadow-outline" placeholder="Generated Changelog" readonly></textarea>
            </div>  

        </div>
    </div>


    <script>
        function generateChangelog() {
            const version = document.getElementById('version').value;
            const date = document.getElementById('date').value;
            const added = document.querySelector('.added-items').value.trim();
            const fixed = document.querySelector('.fixed-items').value.trim();
            const changed = document.querySelector('.changed-items').value.trim();
            const removed = document.querySelector('.removed-items').value.trim();

            if (!validateVersion(version)) {
                alert('Please enter a valid version in the format of number.number.number (e.g., 1.0.0)');
                return;
            }

            let changelog = `## [${version}] - ${date}\n\n`;
            changelog += formatSection(added, 'Added');
            changelog += formatSection(fixed, 'Fixed');
            changelog += formatSection(changed, 'Changed');
            changelog += formatSection(removed, 'Removed');

            document.getElementById('generatedChangelog').value = changelog.trim();
        }

        function validateVersion(version) {
            const versionRegex = /^\d+\.\d+\.\d+$/;
            return versionRegex.test(version);
        }

        function formatSection(sectionText, sectionTitle) {
            if (sectionText !== '') {
                const lines = sectionText.split('\n');
                const formattedLines = lines.map(line => `- ${line}`).join('\n');
                return `### ${sectionTitle}\n${formattedLines}\n\n`;
            }
        return '';
        }
        function addTodayDate() {
            const dateInput = document.getElementById('date');
            const today = new Date().toISOString().split('T')[0]; // Get today's date in YYYY-MM-DD format
            dateInput.value = today;
        }
    </script>
</body>
</html>
